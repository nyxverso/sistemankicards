<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Flashcards - Revisão Espaçada</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .card {
            perspective: 1000px;
            cursor: pointer;
            min-height: 400px;
        }

        .card-inner {
            transition: transform 0.6s;
            transform-style: preserve-3d;
            position: relative;
            width: 100%;
            height: 100%;
        }

        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }

        .card-front, .card-back {
            backface-visibility: hidden;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            box-sizing: border-box;
        }

        .card-back {
            transform: rotateY(180deg);
        }

        .progress-ring {
            transition: stroke-dashoffset 0.5s;
        }

        .flip-animation {
            animation: flip 0.3s ease-in-out;
        }

        @keyframes flip {
            0% { transform: rotateY(0deg); }
            50% { transform: rotateY(90deg); }
            100% { transform: rotateY(180deg); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen font-sans">
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- Header -->
        <header class="text-center mb-12">
            <div class="flex items-center justify-center space-x-4 mb-6">
                <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/0dc2997f-1540-49bd-9cc8-7debc4e8da85.png" alt="Ilustração de um cérebro com engrenagens representando aprendizado e memorização" class="w-20 h-20 rounded-full shadow-lg" />
                <h1 class="text-4xl font-bold text-gray-800">Sistema de Flashcards</h1>
            </div>
            <p class="text-gray-600 text-lg">Sistema de revisão espaçada baseado no algoritmo SM-2</p>
        </header>

        <!-- Main Navigation -->
        <nav class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
            <button onclick="showScreen('study')" class="bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex flex-col items-center">
                <i class="fas fa-graduation-cap text-3xl text-blue-600 mb-4"></i>
                <h2 class="text-xl font-semibold mb-2">Estudar</h2>
                <p class="text-gray-600 text-center">Revise seus flashcards baseado no algoritmo de repetição espaçada</p>
            </button>

            <button onclick="showScreen('new-card')" class="bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex flex-col items-center">
                <i class="fas fa-plus-circle text-3xl text-green-600 mb-4"></i>
                <h2 class="text-xl font-semibold mb-2">Novo Flashcard</h2>
                <p class="text-gray-600 text-center">Crie um novo card com pergunta e resposta</p>
            </button>

            <button onclick="showScreen('stats')" class="bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex flex-col items-center">
                <i class="fas fa-chart-line text-3xl text-purple-600 mb-4"></i>
                <h2 class="text-xl font-semibold mb-2">Estatísticas</h2>
                <p class="text-gray-600 text-center">Acompanhe seu progresso e desempenho</p>
            </button>
        </nav>

        <!-- Study Screen -->
        <div id="study-screen" class="hidden bg-white rounded-xl shadow-xl p-8 mb-8">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-2xl font-bold text-gray-800">Sessão de Estudo</h2>
                <div class="flex items-center space-x-4">
                    <span id="cards-count" class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium">
                        0 cards para revisar
                    </span>
                    <button onclick="stopSession()" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors">
                        <i class="fas fa-times mr-2"></i>Parar
                    </button>
                </div>
            </div>

            <div class="text-center">
                <div id="study-card" class="card bg-gradient-to-r from-blue-100 to-indigo-100 rounded-xl p-8 mb-8 mx-auto max-w-2xl min-h-[300px] cursor-pointer" onclick="flipCard()">
                    <div class="card-inner">
                        <div class="card-front flex flex-col justify-center items-center">
                            <i class="fas fa-question-circle text-6xl text-blue-600 mb-6"></i>
                            <h3 class="text-2xl font-semibold text-gray-800 mb-4" id="card-question">Carregando pergunta...</h3>
                            <p class="text-gray-600">Clique para ver a resposta</p>
                        </div>
                        <div class="card-back flex flex-col justify-center items-center">
                            <i class="fas fa-lightbulb text-6xl text-yellow-500 mb-6"></i>
                            <h3 class="text-xl font-semibold text-gray-800 mb-4">Resposta:</h3>
                            <p class="text-lg text-gray-700 text-center" id="card-answer">Carregando resposta...</p>
                        </div>
                    </div>
                </div>

                <div id="rating-buttons" class="hidden space-y-4 md:space-y-0 md:space-x-4 md:flex justify-center">
                    <button onclick="rateCard(1)" class="bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                        <i class="fas fa-times mr-2"></i>Difícil
                    </button>
                    <button onclick="rateCard(2)" class="bg-yellow-500 hover:bg-yellow-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                        <i class="fas fa-question mr-2"></i>Médio
                    </button>
                    <button onclick="rateCard(3)" class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                        <i class="fas fa-check mr-2"></i>Fácil
                    </button>
                </div>

                <div id="start-session" class="text-center">
                    <button onclick="startStudySession()" class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-4 rounded-lg text-lg font-semibold transition-colors">
                        <i class="fas fa-play mr-2"></i>Iniciar Sessão de Estudo
                    </button>
                </div>
            </div>
        </div>

        <!-- New Card Screen -->
        <div id="new-card-screen" class="hidden bg-white rounded-xl shadow-xl p-8 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-8">Criar Novo Flashcard</h2>
            
            <form id="new-card-form" class="space-y-6 max-w-2xl mx-auto">
                <div>
                    <label class="block text-gray-700 font-medium mb-2" for="question">
                        Pergunta
                    </label>
                    <textarea 
                        id="question" 
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        rows="3"
                        placeholder="Digite a pergunta..."
                        required
                    ></textarea>
                </div>

                <div>
                    <label class="block text-gray-700 font-medium mb-2" for="answer">
                        Resposta
                    </label>
                    <textarea 
                        id="answer" 
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        rows="4"
                        placeholder="Digite a resposta..."
                        required
                    ></textarea>
                </div>

                <div>
                    <label class="block text-gray-700 font-medium mb-2" for="tags">
                        Tags (opcional)
                    </label>
                    <input 
                        type="text" 
                        id="tags" 
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        placeholder="ex: matemática, história, programação"
                    >
                </div>

                <div class="flex space-x-4">
                    <button type="submit" class="bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                        <i class="fas fa-save mr-2"></i>Salvar Flashcard
                    </button>
                    <button type="button" onclick="clearForm()" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                        <i class="fas fa-times mr-2"></i>Limpar
                    </button>
                </div>
            </form>
        </div>

        <!-- Stats Screen -->
        <div id="stats-screen" class="hidden bg-white rounded-xl shadow-xl p-8 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-8">Estatísticas</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="bg-blue-50 p-6 rounded-lg text-center">
                    <div class="text-4xl font-bold text-blue-600 mb-2" id="total-cards">0</div>
                    <div class="text-gray-600">Total de Cards</div>
                </div>
                
                <div class="bg-green-50 p-6 rounded-lg text-center">
                    <div class="text-4xl font-bold text-green-600 mb-2" id="due-cards">0</div>
                    <div class="text-gray-600">Cards para Revisar</div>
                </div>
                
                <div class="bg-purple-50 p-6 rounded-lg text-center">
                    <div class="text-4xl font-bold text-purple-600 mb-2" id="success-rate">0%</div>
                    <div class="text-gray-600">Taxa de Acerto</div>
                </div>
            </div>

            <div class="bg-gray-50 p-6 rounded-lg">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">Histórico de Revisões</h3>
                <div id="review-history" class="text-gray-600 text-center">
                    Nenhuma revisão realizada ainda.
                </div>
            </div>
        </div>

        <!-- Card List -->
        <div id="card-list-screen" class="hidden bg-white rounded-xl shadow-xl p-8 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-8">Todos os Flashcards</h2>
            <div id="cards-container" class="space-y-4">
                <!-- Cards will be loaded here -->
            </div>
        </div>

        <!-- Footer Navigation -->
        <footer class="bg-white rounded-xl shadow-md p-6">
            <div class="flex flex-wrap justify-center space-x-6">
                <button onclick="showScreen('study')" class="text-blue-600 hover:text-blue-800 font-medium">
                    <i class="fas fa-graduation-cap mr-2"></i>Estudar
                </button>
                <button onclick="showScreen('new-card')" class="text-green-600 hover:text-green-800 font-medium">
                    <i class="fas fa-plus mr-2"></i>Novo Card
                </button>
                <button onclick="showScreen('stats')" class="text-purple-600 hover:text-purple-800 font-medium">
                    <i class="fas fa-chart-line mr-2"></i>Estatísticas
                </button>
                <button onclick="showScreen('card-list')" class="text-gray-600 hover:text-gray-800 font-medium">
                    <i class="fas fa-list mr-2"></i>Todos os Cards
                </button>
            </div>
        </footer>
    </div>

    <script>
        // Flashcard system with spaced repetition (SM-2 algorithm)
        class SpacedRepetitionSystem {
            constructor() {
                this.cards = this.loadCards();
                this.currentCard = null;
                this.sessionCards = [];
            }

            loadCards() {
                const stored = localStorage.getItem('flashcards');
                return stored ? JSON.parse(stored) : [];
            }

            saveCards() {
                localStorage.setItem('flashcards', JSON.stringify(this.cards));
            }

            addCard(question, answer, tags = []) {
                const card = {
                    id: Date.now().toString(),
                    question,
                    answer,
                    tags: tags.split(',').map(tag => tag.trim()).filter(tag => tag),
                    createdAt: new Date().toISOString(),
                    easeFactor: 2.5, // Default ease factor for SM-2
                    interval: 1, // Days until next review
                    repetition: 0, // Number of times reviewed
                    nextReview: new Date().toISOString(),
                    lastReview: null,
                    successCount: 0,
                    failCount: 0
                };
                
                this.cards.push(card);
                this.saveCards();
                return card;
            }

            getDueCards() {
                const now = new Date();
                return this.cards.filter(card => new Date(card.nextReview) <= now);
            }

            updateCard(cardId, rating) {
                const card = this.cards.find(c => c.id === cardId);
                if (!card) return;

                const now = new Date();
                card.lastReview = now.toISOString();
                card.repetition++;

                // SM-2 Algorithm
                if (rating === 1) { // Difficult
                    card.easeFactor = Math.max(1.3, card.easeFactor - 0.2);
                    card.interval = 1;
                    card.failCount++;
                } else if (rating === 2) { // Medium
                    card.easeFactor = Math.max(1.3, card.easeFactor - 0.15);
                    card.interval = card.repetition === 1 ? 1 : Math.round(card.interval * card.easeFactor);
                    card.successCount++;
                } else if (rating === 3) { // Easy
                    card.easeFactor = Math.max(1.3, card.easeFactor + 0.1);
                    card.interval = card.repetition === 1 ? 4 : Math.round(card.interval * card.easeFactor * 1.2);
                    card.successCount++;
                }

                // Calculate next review date
                const nextDate = new Date(now);
                nextDate.setDate(nextDate.getDate() + card.interval);
                card.nextReview = nextDate.toISOString();

                this.saveCards();
                return card;
            }

            getStats() {
                const total = this.cards.length;
                const due = this.getDueCards().length;
                const totalReviews = this.cards.reduce((sum, card) => sum + card.repetition, 0);
                const successReviews = this.cards.reduce((sum, card) => sum + card.successCount, 0);
                const successRate = totalReviews > 0 ? Math.round((successReviews / totalReviews) * 100) : 0;

                return { total, due, successRate, totalReviews, successReviews };
            }
        }

        // Initialize the system
        const srs = new SpacedRepetitionSystem();

        // UI Functions
        function showScreen(screenName) {
            // Hide all screens
            document.querySelectorAll('[id$="-screen"]').forEach(screen => {
                screen.classList.add('hidden');
            });

            // Show selected screen
            document.getElementById(`${screenName}-screen`).classList.remove('hidden');

            // Update specific screens
            if (screenName === 'stats') {
                updateStats();
            } else if (screenName === 'card-list') {
                loadCardList();
            }
        }

        function startStudySession() {
            const dueCards = srs.getDueCards();
            if (dueCards.length === 0) {
                alert('Não há cards para revisar no momento!');
                return;
            }

            srs.sessionCards = [...dueCards];
            document.getElementById('start-session').classList.add('hidden');
            document.getElementById('rating-buttons').classList.remove('hidden');
            document.getElementById('cards-count').textContent = `${dueCards.length} cards para revisar`;

            showNextCard();
        }

        function showNextCard() {
            if (srs.sessionCards.length === 0) {
                endSession();
                return;
            }

            srs.currentCard = srs.sessionCards.shift();
            document.getElementById('card-question').textContent = srs.currentCard.question;
            document.getElementById('card-answer').textContent = srs.currentCard.answer;
            
            const cardElement = document.getElementById('study-card');
            cardElement.classList.remove('flipped');
            cardElement.classList.add('fade-in');
            
            setTimeout(() => cardElement.classList.remove('fade-in'), 500);
        }

        function flipCard() {
            document.getElementById('study-card').classList.toggle('flipped');
        }

        function rateCard(rating) {
            if (!srs.currentCard) return;

            srs.updateCard(srs.currentCard.id, rating);
            showNextCard();
            updateStats();
        }

        function stopSession() {
            srs.sessionCards = [];
            document.getElementById('start-session').classList.remove('hidden');
            document.getElementById('rating-buttons').classList.add('hidden');
            document.getElementById('study-card').classList.remove('flipped');
        }

        function endSession() {
            alert('Sessão concluída! Todos os cards foram revisados.');
            stopSession();
        }

        function updateStats() {
            const stats = srs.getStats();
            document.getElementById('total-cards').textContent = stats.total;
            document.getElementById('due-cards').textContent = stats.due;
            document.getElementById('success-rate').textContent = `${stats.successRate}%`;
        }

        function loadCardList() {
            const container = document.getElementById('cards-container');
            container.innerHTML = '';

            if (srs.cards.length === 0) {
                container.innerHTML = '<p class="text-gray-600 text-center">Nenhum flashcard criado ainda.</p>';
                return;
            }

            srs.cards.forEach(card => {
                const nextReview = new Date(card.nextReview);
                const cardElement = document.createElement('div');
                cardElement.className = 'bg-gray-50 p-4 rounded-lg border-l-4 border-blue-500';
                cardElement.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <h3 class="font-semibold text-gray-800">${card.question}</h3>
                        <span class="text-sm text-gray-500">${new Date(card.createdAt).toLocaleDateString()}</span>
                    </div>
                    <p class="text-gray-600 mb-3">${card.answer}</p>
                    <div class="flex justify-between items-center text-sm">
                        <span class="text-gray-500">Próxima revisão: ${nextReview.toLocaleDateString()}</span>
                        <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs">
                            ${card.tags.join(', ') || 'Sem tags'}
                        </span>
                    </div>
                `;
                container.appendChild(cardElement);
            });
        }

        // Form handling
        document.getElementById('new-card-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const question = document.getElementById('question').value;
            const answer = document.getElementById('answer').value;
            const tags = document.getElementById('tags').value;

            srs.addCard(question, answer, tags);
            
            alert('Flashcard criado com sucesso!');
            this.reset();
            updateStats();
        });

        function clearForm() {
            document.getElementById('new-card-form').reset();
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateStats();
            showScreen('study');
        });
    </script>
</body>
</html>

